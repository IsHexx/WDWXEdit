/*
 * Copyright (c) 2024-2025 IsHexx
 * All rights reserved.
 *
 * This software is proprietary and confidential. No part of this software
 * may be reproduced, distributed, or transmitted in any form or by any means,
 * including photocopying, recording, or other electronic or mechanical methods,
 * without the prior written permission of the author, except in the case of
 * brief quotations embodied in critical reviews and certain other noncommercial
 * uses permitted by copyright law.
 *
 * For permission requests, contact: IsHexx
 */
// 更新import路径
import AssetsManager from "../../core/assets";
require('./wasm_exec.js');
let WasmLoaded = false;
export function IsWasmReady() {
    return WasmLoaded;
}
export async function LoadWasm() {
    if (WasmLoaded) {
        return;
    }
    const assets = AssetsManager.getInstance();
    const wasmContent = await assets.loadWasm();
    if (!wasmContent) {
        console.error('WASM content not found');
        // throw new Error('WASM content not found');
        return;
    }
    const go = new Go();
    const ret = await WebAssembly.instantiate(wasmContent, go.importObject);
    go.run(ret.instance);
    WasmLoaded = true;
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2FzbS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIndhc20udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7OztHQVlHO0FBRUgsYUFBYTtBQUNiLE9BQU8sYUFBYSxNQUFNLG1CQUFtQixDQUFDO0FBQzlDLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBWTFCLElBQUksVUFBVSxHQUFHLEtBQUssQ0FBQztBQUV2QixNQUFNLFVBQVUsV0FBVztJQUN2QixPQUFPLFVBQVUsQ0FBQztBQUN0QixDQUFDO0FBRUQsTUFBTSxDQUFDLEtBQUssVUFBVSxRQUFRO0lBQzFCLElBQUksVUFBVSxFQUFFO1FBQ1osT0FBTztLQUNWO0lBQ0QsTUFBTSxNQUFNLEdBQUcsYUFBYSxDQUFDLFdBQVcsRUFBRSxDQUFDO0lBQzNDLE1BQU0sV0FBVyxHQUFHLE1BQU0sTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO0lBRTVDLElBQUksQ0FBQyxXQUFXLEVBQUU7UUFDaEIsT0FBTyxDQUFDLEtBQUssQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO1FBQ3hDLDZDQUE2QztRQUM3QyxPQUFPO0tBQ1I7SUFDRCxNQUFNLEVBQUUsR0FBRyxJQUFJLEVBQUUsRUFBRSxDQUFDO0lBQ3BCLE1BQU0sR0FBRyxHQUFHLE1BQU0sV0FBVyxDQUFDLFdBQVcsQ0FBQyxXQUFXLEVBQUUsRUFBRSxDQUFDLFlBQVksQ0FBQyxDQUFDO0lBQ3hFLEVBQUUsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ3JCLFVBQVUsR0FBRyxJQUFJLENBQUM7QUFDdEIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiBDb3B5cmlnaHQgKGMpIDIwMjQtMjAyNSBJc0hleHhcbiAqIEFsbCByaWdodHMgcmVzZXJ2ZWQuXG4gKlxuICogVGhpcyBzb2Z0d2FyZSBpcyBwcm9wcmlldGFyeSBhbmQgY29uZmlkZW50aWFsLiBObyBwYXJ0IG9mIHRoaXMgc29mdHdhcmVcbiAqIG1heSBiZSByZXByb2R1Y2VkLCBkaXN0cmlidXRlZCwgb3IgdHJhbnNtaXR0ZWQgaW4gYW55IGZvcm0gb3IgYnkgYW55IG1lYW5zLFxuICogaW5jbHVkaW5nIHBob3RvY29weWluZywgcmVjb3JkaW5nLCBvciBvdGhlciBlbGVjdHJvbmljIG9yIG1lY2hhbmljYWwgbWV0aG9kcyxcbiAqIHdpdGhvdXQgdGhlIHByaW9yIHdyaXR0ZW4gcGVybWlzc2lvbiBvZiB0aGUgYXV0aG9yLCBleGNlcHQgaW4gdGhlIGNhc2Ugb2ZcbiAqIGJyaWVmIHF1b3RhdGlvbnMgZW1ib2RpZWQgaW4gY3JpdGljYWwgcmV2aWV3cyBhbmQgY2VydGFpbiBvdGhlciBub25jb21tZXJjaWFsXG4gKiB1c2VzIHBlcm1pdHRlZCBieSBjb3B5cmlnaHQgbGF3LlxuICpcbiAqIEZvciBwZXJtaXNzaW9uIHJlcXVlc3RzLCBjb250YWN0OiBJc0hleHhcbiAqL1xuXG4vLyDmm7TmlrBpbXBvcnTot6/lvoRcbmltcG9ydCBBc3NldHNNYW5hZ2VyIGZyb20gXCIuLi8uLi9jb3JlL2Fzc2V0c1wiO1xucmVxdWlyZSgnLi93YXNtX2V4ZWMuanMnKTtcblxuZGVjbGFyZSBjbGFzcyBHbyB7XG4gIGFyZ3Y6IHN0cmluZ1tdO1xuICBlbnY6IHsgW2VudktleTogc3RyaW5nXTogc3RyaW5nIH07XG4gIGV4aXQ6IChjb2RlOiBudW1iZXIpID0+IHZvaWQ7XG4gIGltcG9ydE9iamVjdDogV2ViQXNzZW1ibHkuSW1wb3J0cztcbiAgZXhpdGVkOiBib29sZWFuO1xuICBtZW06IERhdGFWaWV3O1xuICBydW4oaW5zdGFuY2U6IFdlYkFzc2VtYmx5Lkluc3RhbmNlKTogUHJvbWlzZTx2b2lkPjtcbn1cblxubGV0IFdhc21Mb2FkZWQgPSBmYWxzZTtcblxuZXhwb3J0IGZ1bmN0aW9uIElzV2FzbVJlYWR5KCkge1xuICAgIHJldHVybiBXYXNtTG9hZGVkO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gTG9hZFdhc20oKSB7XG4gICAgaWYgKFdhc21Mb2FkZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBhc3NldHMgPSBBc3NldHNNYW5hZ2VyLmdldEluc3RhbmNlKCk7XG4gICAgY29uc3Qgd2FzbUNvbnRlbnQgPSBhd2FpdCBhc3NldHMubG9hZFdhc20oKTtcblxuICAgIGlmICghd2FzbUNvbnRlbnQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1dBU00gY29udGVudCBub3QgZm91bmQnKTtcbiAgICAgIC8vIHRocm93IG5ldyBFcnJvcignV0FTTSBjb250ZW50IG5vdCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBnbyA9IG5ldyBHbygpO1xuICAgIGNvbnN0IHJldCA9IGF3YWl0IFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlKHdhc21Db250ZW50LCBnby5pbXBvcnRPYmplY3QpO1xuICAgIGdvLnJ1bihyZXQuaW5zdGFuY2UpO1xuICAgIFdhc21Mb2FkZWQgPSB0cnVlO1xufVxuIl19