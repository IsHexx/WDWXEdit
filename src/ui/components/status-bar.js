export class StatusBar {
    constructor(container) {
        this.currentMessage = null;
        this.autoHideTimer = null;
        this.container = container;
        this.init();
    }
    // Claude Code Update: ‰ΩøÁî®CSSÁ±ªËÄåÈùûÂÜÖËÅîÊ†∑Âºè
    init() {
        this.statusBar = this.container.createDiv({ cls: 'wdwx-status-bar hidden' });
    }
    // ÊòæÁ§∫Áä∂ÊÄÅÊ∂àÊÅØ
    showMessage(message) {
        this.currentMessage = {
            ...message,
            timestamp: message.timestamp || Date.now()
        };
        this.statusBar.empty();
        this.statusBar.removeClass('status-info', 'status-success', 'status-warning', 'status-error');
        this.statusBar.addClass(`status-${message.type}`);
        // ÂàõÂª∫Ê∂àÊÅØÂÜÖÂÆπ
        const messageContent = this.statusBar.createDiv({ cls: 'status-content' });
        // Claude Code Update: ‰ΩøÁî®textContentÊõø‰ª£innerHTMLËÆæÁΩÆÈùôÊÄÅÊñáÊú¨
        // ÂõæÊ†á
        const icon = messageContent.createSpan({ cls: 'status-icon' });
        icon.textContent = this.getIconForType(message.type);
        // Ê∂àÊÅØÊñáÊú¨
        const text = messageContent.createSpan({ cls: 'status-text' });
        text.textContent = message.message;
        // ÂÖ≥Èó≠ÊåâÈíÆ
        const closeBtn = messageContent.createSpan({ cls: 'status-close' });
        closeBtn.textContent = '√ó';
        closeBtn.onclick = () => this.hideMessage();
        this.statusBar.removeClass('hidden');
    }
    // ÊòæÁ§∫‰ø°ÊÅØÊ∂àÊÅØÔºà3ÁßíÂêéËá™Âä®Ê∂àÂ§±Ôºâ
    showInfo(message) {
        this.showTemporaryMessage({ type: 'info', message }, 3000);
    }
    // ÊòæÁ§∫ÊàêÂäüÊ∂àÊÅØÔºà3ÁßíÂêéËá™Âä®Ê∂àÂ§±Ôºâ
    showSuccess(message) {
        this.showTemporaryMessage({ type: 'success', message }, 3000);
    }
    // ÊòæÁ§∫Ë≠¶ÂëäÊ∂àÊÅØÔºà5ÁßíÂêéËá™Âä®Ê∂àÂ§±Ôºâ
    showWarning(message) {
        this.showTemporaryMessage({ type: 'warning', message }, 5000);
    }
    // ÊòæÁ§∫ÈîôËØØÊ∂àÊÅØÔºà‰∏çËá™Âä®Ê∂àÂ§±Ôºâ
    showError(message) {
        this.showMessage({ type: 'error', message });
    }
    // Claude Code Update: ‰øùÁïôËøõÂ∫¶Êù°ÂÆΩÂ∫¶ÁöÑÂÜÖËÅîÊ†∑ÂºèÔºàÂä®ÊÄÅËÆ°ÁÆóÂÄºÔºâ
    // ÊòæÁ§∫ËøõÂ∫¶Áä∂ÊÄÅÔºà‰∏çËá™Âä®Ê∂àÂ§±Ôºâ
    showProgress(message, progress) {
        this.showMessage({ type: 'info', message });
        if (typeof progress === 'number') {
            const progressBar = this.statusBar.createDiv({ cls: 'status-progress' });
            const progressFill = progressBar.createDiv({ cls: 'status-progress-fill' });
            // ËøõÂ∫¶Êù°ÂÆΩÂ∫¶ÈúÄË¶ÅÂä®ÊÄÅËÆ°ÁÆóÔºå‰øùÁïôÂÜÖËÅîÊ†∑Âºè
            progressFill.setAttr('style', `width: ${Math.min(100, Math.max(0, progress))}%`);
        }
    }
    // Êõ¥Êñ∞ËøõÂ∫¶
    updateProgress(progress) {
        const progressFill = this.statusBar.querySelector('.status-progress-fill');
        if (progressFill) {
            // ËøõÂ∫¶Êù°ÂÆΩÂ∫¶ÈúÄË¶ÅÂä®ÊÄÅËÆ°ÁÆóÔºå‰øùÁïôÂÜÖËÅîÊ†∑Âºè
            progressFill.setAttr('style', `width: ${Math.min(100, Math.max(0, progress))}%`);
        }
    }
    // Claude Code Update: ‰ΩøÁî®CSSÁ±ªËÄåÈùûÂÜÖËÅîÊ†∑Âºè
    // ÈöêËóèÊ∂àÊÅØ
    hideMessage() {
        this.statusBar.addClass('hidden');
        this.currentMessage = null;
        if (this.autoHideTimer) {
            clearTimeout(this.autoHideTimer);
            this.autoHideTimer = null;
        }
    }
    // Ëé∑ÂèñÂΩìÂâçÊ∂àÊÅØ
    getCurrentMessage() {
        return this.currentMessage;
    }
    // Ê∏ÖÈô§ÊâÄÊúâÊ∂àÊÅØ
    clear() {
        this.hideMessage();
        this.statusBar.empty();
    }
    getIconForType(type) {
        const icons = {
            info: 'üìò',
            success: '‚úÖ',
            warning: '‚ö†Ô∏è',
            error: '‚ùå'
        };
        return icons[type] || icons.info;
    }
    // ÊòæÁ§∫‰∏¥Êó∂Ê∂àÊÅØÔºàËá™Âä®ÈöêËóèÔºâ
    showTemporaryMessage(message, duration = 3000) {
        const messageWithTimestamp = {
            ...message,
            timestamp: message.timestamp || Date.now()
        };
        this.showMessage(messageWithTimestamp);
        // Ê∏ÖÈô§‰πãÂâçÁöÑÂÆöÊó∂Âô®
        if (this.autoHideTimer) {
            clearTimeout(this.autoHideTimer);
        }
        this.autoHideTimer = setTimeout(() => {
            if (this.currentMessage && this.currentMessage.timestamp === messageWithTimestamp.timestamp) {
                this.hideMessage();
            }
        }, duration);
    }
    // ÈîÄÊØÅÁªÑ‰ª∂
    destroy() {
        this.clear();
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3RhdHVzLWJhci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInN0YXR1cy1iYXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBT0EsTUFBTSxPQUFPLFNBQVM7SUFNbEIsWUFBWSxTQUF5QjtRQUg3QixtQkFBYyxHQUF5QixJQUFJLENBQUM7UUFDNUMsa0JBQWEsR0FBMEIsSUFBSSxDQUFDO1FBR2hELElBQUksQ0FBQyxTQUFTLEdBQUcsU0FBUyxDQUFDO1FBQzNCLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztJQUNoQixDQUFDO0lBRUQsbUNBQW1DO0lBQzNCLElBQUk7UUFDUixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEVBQUUsR0FBRyxFQUFFLHdCQUF3QixFQUFFLENBQUMsQ0FBQztJQUNqRixDQUFDO0lBRUQsU0FBUztJQUNULFdBQVcsQ0FBQyxPQUFzQjtRQUM5QixJQUFJLENBQUMsY0FBYyxHQUFHO1lBQ2xCLEdBQUcsT0FBTztZQUNWLFNBQVMsRUFBRSxPQUFPLENBQUMsU0FBUyxJQUFJLElBQUksQ0FBQyxHQUFHLEVBQUU7U0FDN0MsQ0FBQztRQUVGLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDdkIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxXQUFXLENBQUMsYUFBYSxFQUFFLGdCQUFnQixFQUFFLGdCQUFnQixFQUFFLGNBQWMsQ0FBQyxDQUFDO1FBQzlGLElBQUksQ0FBQyxTQUFTLENBQUMsUUFBUSxDQUFDLFVBQVUsT0FBTyxDQUFDLElBQUksRUFBRSxDQUFDLENBQUM7UUFFbEQsU0FBUztRQUNULE1BQU0sY0FBYyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsU0FBUyxDQUFDLEVBQUUsR0FBRyxFQUFFLGdCQUFnQixFQUFFLENBQUMsQ0FBQztRQUUzRSxxREFBcUQ7UUFDckQsS0FBSztRQUNMLE1BQU0sSUFBSSxHQUFHLGNBQWMsQ0FBQyxVQUFVLENBQUMsRUFB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SSxDQUFDLGNBQWMsSUFBSSxJQUFJLENBQUMsY0FBYyxDQUFDLFNBQVMsS0FBSyxvQkFBb0IsQ0FBQyxTQUFTLEVBQUU7Z0JBQ3pGLElBQUksQ0FBQyxXQUFXLEVBQUUsQ0FBQzthQUN0QjtRQUNMLENBQUMsRUFBRSxRQUFRLENBQUMsQ0FBQztJQUNqQixDQUFDO0lBRUQsT0FBTztJQUNQLE9BQU87UUFDSCxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDakIsQ0FBQztDQUNKIiwic291cmNlc0NvbnRlbnQiOlsiLy8gVjLpo47moLznirbmgIHmj5DnpLrmnaFcbmV4cG9ydCBpbnRlcmZhY2UgU3RhdHVzTWVzc2FnZSB7XG4gICAgdHlwZTogJ2luZm8nIHwgJ3N1Y2Nlc3MnIHwgJ3dhcm5pbmcnIHwgJ2Vycm9yJztcbiAgICBtZXNzYWdlOiBzdHJpbmc7XG4gICAgdGltZXN0YW1wPzogbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgU3RhdHVzQmFyIHtcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTERpdkVsZW1lbnQ7XG4gICAgcHJpdmF0ZSBzdGF0dXNCYXI6IEhUTUxEaXZFbGVtZW50O1xuICAgIHByaXZhdGUgY3VycmVudE1lc3NhZ2U6IFN0YXR1c01lc3NhZ2UgfCBudWxsID0gbnVsbDtcbiAgICBwcml2YXRlIGF1dG9IaWRlVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG5cbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXI6IEhUTUxEaXZFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB0aGlzLmluaXQoKTtcbiAgICB9XG5cbiAgICAvLyBDbGF1ZGUgQ29kZSBVcGRhdGU6IOS9v+eUqENTU+exu+iAjOmdnuWGheiBlOagt+W8j1xuICAgIHByaXZhdGUgaW5pdCgpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zdGF0dXNCYXIgPSB0aGlzLmNvbnRhaW5lci5jcmVhdGVEaXYoeyBjbHM6ICd3ZHd4LXN0YXR1cy1iYXIgaGlkZGVuJyB9KTtcbiAgICB9XG5cbiAgICAvLyDmmL7npLrnirbmgIHmtojmga9cbiAgICBzaG93TWVzc2FnZShtZXNzYWdlOiBTdGF0dXNNZXNzYWdlKTogdm9pZCB7XG4gICAgICAgIHRoaXMuY3VycmVudE1lc3NhZ2UgPSB7XG4gICAgICAgICAgICAuLi5tZXNzYWdlLFxuICAgICAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlLnRpbWVzdGFtcCB8fCBEYXRlLm5vdygpXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5zdGF0dXNCYXIuZW1wdHkoKTtcbiAgICAgICAgdGhpcy5zdGF0dXNCYXIucmVtb3ZlQ2xhc3MoJ3N0YXR1cy1pbmZvJywgJ3N0YXR1cy1zdWNjZXNzJywgJ3N0YXR1cy13YXJuaW5nJywgJ3N0YXR1cy1lcnJvcicpO1xuICAgICAgICB0aGlzLnN0YXR1c0Jhci5hZGRDbGFzcyhgc3RhdHVzLSR7bWVzc2FnZS50eXBlfWApO1xuXG4gICAgICAgIC8vIOWIm+W7uua2iOaBr+WGheWuuVxuICAgICAgICBjb25zdCBtZXNzYWdlQ29udGVudCA9IHRoaXMuc3RhdHVzQmFyLmNyZWF0ZURpdih7IGNsczogJ3N0YXR1cy1jb250ZW50JyB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIENsYXVkZSBDb2RlIFVwZGF0ZTog5L2/55SodGV4dENvbnRlbnTmm7/ku6Npbm5lckhUTUzorr7nva7pnZnmgIHmlofmnKxcbiAgICAgICAgLy8g5Zu+5qCHXG4gICAgICAgIGNvbnN0IGljb24gPSBtZXNzYWdlQ29udGVudC5jcmVhdGVTcGFuKHsgY2xzOiAnc3RhdHVzLWljb24nIH0pO1xuICAgICAgICBpY29uLnRleHRDb250ZW50ID0gdGhpcy5nZXRJY29uRm9yVHlwZShtZXNzYWdlLnR5cGUpO1xuXG4gICAgICAgIC8vIOa2iOaBr+aWh+acrFxuICAgICAgICBjb25zdCB0ZXh0ID0gbWVzc2FnZUNvbnRlbnQuY3JlYXRlU3Bhbih7IGNsczogJ3N0YXR1cy10ZXh0JyB9KTtcbiAgICAgICAgdGV4dC50ZXh0Q29udGVudCA9IG1lc3NhZ2UubWVzc2FnZTtcblxuICAgICAgICAvLyDlhbPpl63mjInpkq5cbiAgICAgICAgY29uc3QgY2xvc2VCdG4gPSBtZXNzYWdlQ29udGVudC5jcmVhdGVTcGFuKHsgY2xzOiAnc3RhdHVzLWNsb3NlJyB9KTtcbiAgICAgICAgY2xvc2VCdG4udGV4dENvbnRlbnQgPSAnw5cnO1xuICAgICAgICBjbG9zZUJ0bi5vbmNsaWNrID0gKCkgPT4gdGhpcy5oaWRlTWVzc2FnZSgpO1xuXG4gICAgICAgIHRoaXMuc3RhdHVzQmFyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICB9XG5cbiAgICAvLyDmmL7npLrkv6Hmga/mtojmga/vvIgz56eS5ZCO6Ieq5Yqo5raI5aSx77yJXG4gICAgc2hvd0luZm8obWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2hvd1RlbXBvcmFyeU1lc3NhZ2UoeyB0eXBlOiAnaW5mbycsIG1lc3NhZ2UgfSwgMzAwMCk7XG4gICAgfVxuXG4gICAgLy8g5pi+56S65oiQ5Yqf5raI5oGv77yIM+enkuWQjuiHquWKqOa2iOWkse+8iVxuICAgIHNob3dTdWNjZXNzKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgICAgICB0aGlzLnNob3dUZW1wb3JhcnlNZXNzYWdlKHsgdHlwZTogJ3N1Y2Nlc3MnLCBtZXNzYWdlIH0sIDMwMDApO1xuICAgIH1cblxuICAgIC8vIOaYvuekuuitpuWRiua2iOaBr++8iDXnp5LlkI7oh6rliqjmtojlpLHvvIlcbiAgICBzaG93V2FybmluZyhtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zaG93VGVtcG9yYXJ5TWVzc2FnZSh7IHR5cGU6ICd3YXJuaW5nJywgbWVzc2FnZSB9LCA1MDAwKTtcbiAgICB9XG5cbiAgICAvLyDmmL7npLrplJnor6/mtojmga/vvIjkuI3oh6rliqjmtojlpLHvvIlcbiAgICBzaG93RXJyb3IobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgICAgIHRoaXMuc2hvd01lc3NhZ2UoeyB0eXBlOiAnZXJyb3InLCBtZXNzYWdlIH0pO1xuICAgIH1cblxuICAgIC8vIENsYXVkZSBDb2RlIFVwZGF0ZTog5L+d55WZ6L+b5bqm5p2h5a695bqm55qE5YaF6IGU5qC35byP77yI5Yqo5oCB6K6h566X5YC877yJXG4gICAgLy8g5pi+56S66L+b5bqm54q25oCB77yI5LiN6Ieq5Yqo5raI5aSx77yJXG4gICAgc2hvd1Byb2dyZXNzKG1lc3NhZ2U6IHN0cmluZywgcHJvZ3Jlc3M/OiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgdGhpcy5zaG93TWVzc2FnZSh7IHR5cGU6ICdpbmZvJywgbWVzc2FnZSB9KTtcblxuICAgICAgICBpZiAodHlwZW9mIHByb2dyZXNzID09PSAnbnVtYmVyJykge1xuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSB0aGlzLnN0YXR1c0Jhci5jcmVhdGVEaXYoeyBjbHM6ICdzdGF0dXMtcHJvZ3Jlc3MnIH0pO1xuICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gcHJvZ3Jlc3NCYXIuY3JlYXRlRGl2KHsgY2xzOiAnc3RhdHVzLXByb2dyZXNzLWZpbGwnIH0pO1xuICAgICAgICAgICAgLy8g6L+b5bqm5p2h5a695bqm6ZyA6KaB5Yqo5oCB6K6h566X77yM5L+d55WZ5YaF6IGU5qC35byPXG4gICAgICAgICAgICBwcm9ncmVzc0ZpbGwuc2V0QXR0cignc3R5bGUnLCBgd2lkdGg6ICR7TWF0aC5taW4oMTAwLCBNYXRoLm1heCgwLCBwcm9ncmVzcykpfSVgKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIOabtOaWsOi/m+W6plxuICAgIHVwZGF0ZVByb2dyZXNzKHByb2dyZXNzOiBudW1iZXIpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcHJvZ3Jlc3NGaWxsID0gdGhpcy5zdGF0dXNCYXIucXVlcnlTZWxlY3RvcignLnN0YXR1cy1wcm9ncmVzcy1maWxsJykgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGlmIChwcm9ncmVzc0ZpbGwpIHtcbiAgICAgICAgICAgIC8vIOi/m+W6puadoeWuveW6pumcgOimgeWKqOaAgeiuoeeul++8jOS/neeVmeWGheiBlOagt+W8j1xuICAgICAgICAgICAgcHJvZ3Jlc3NGaWxsLnNldEF0dHIoJ3N0eWxlJywgYHdpZHRoOiAke01hdGgubWluKDEwMCwgTWF0aC5tYXgoMCwgcHJvZ3Jlc3MpKX0lYCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGF1ZGUgQ29kZSBVcGRhdGU6IOS9v+eUqENTU+exu+iAjOmdnuWGheiBlOagt+W8j1xuICAgIC8vIOmakOiXj+a2iOaBr1xuICAgIGhpZGVNZXNzYWdlKCk6IHZvaWQge1xuICAgICAgICB0aGlzLnN0YXR1c0Jhci5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgICAgIHRoaXMuY3VycmVudE1lc3NhZ2UgPSBudWxsO1xuICAgICAgICBpZiAodGhpcy5hdXRvSGlkZVRpbWVyKSB7XG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5hdXRvSGlkZVRpbWVyKTtcbiAgICAgICAgICAgIHRoaXMuYXV0b0hpZGVUaW1lciA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDojrflj5blvZPliY3mtojmga9cbiAgICBnZXRDdXJyZW50TWVzc2FnZSgpOiBTdGF0dXNNZXNzYWdlIHwgbnVsbCB7XG4gICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRNZXNzYWdlO1xuICAgIH1cblxuICAgIC8vIOa4hemZpOaJgOaciea2iOaBr1xuICAgIGNsZWFyKCk6IHZvaWQge1xuICAgICAgICB0aGlzLmhpZGVNZXNzYWdlKCk7XG4gICAgICAgIHRoaXMuc3RhdHVzQmFyLmVtcHR5KCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBnZXRJY29uRm9yVHlwZSh0eXBlOiBTdGF0dXNNZXNzYWdlWyd0eXBlJ10pOiBzdHJpbmcge1xuICAgICAgICBjb25zdCBpY29ucyA9IHtcbiAgICAgICAgICAgIGluZm86ICfwn5OYJyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ICfinIUnLFxuICAgICAgICAgICAgd2FybmluZzogJ+KaoO+4jycsXG4gICAgICAgICAgICBlcnJvcjogJ+KdjCdcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGljb25zW3R5cGVdIHx8IGljb25zLmluZm87XG4gICAgfVxuXG4gICAgLy8g5pi+56S65Li05pe25raI5oGv77yI6Ieq5Yqo6ZqQ6JeP77yJXG4gICAgcHJpdmF0ZSBzaG93VGVtcG9yYXJ5TWVzc2FnZShtZXNzYWdlOiBTdGF0dXNNZXNzYWdlLCBkdXJhdGlvbjogbnVtYmVyID0gMzAwMCk6IHZvaWQge1xuICAgICAgICBjb25zdCBtZXNzYWdlV2l0aFRpbWVzdGFtcCA9IHtcbiAgICAgICAgICAgIC4uLm1lc3NhZ2UsXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG1lc3NhZ2UudGltZXN0YW1wIHx8IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2hvd01lc3NhZ2UobWVzc2FnZVdpdGhUaW1lc3RhbXApO1xuICAgICAgICBcbiAgICAgICAgLy8g5riF6Zmk5LmL5YmN55qE5a6a5pe25ZmoXG4gICAgICAgIGlmICh0aGlzLmF1dG9IaWRlVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmF1dG9IaWRlVGltZXIpO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICB0aGlzLmF1dG9IaWRlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmN1cnJlbnRNZXNzYWdlICYmIHRoaXMuY3VycmVudE1lc3NhZ2UudGltZXN0YW1wID09PSBtZXNzYWdlV2l0aFRpbWVzdGFtcC50aW1lc3RhbXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLmhpZGVNZXNzYWdlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGR1cmF0aW9uKTtcbiAgICB9XG5cbiAgICAvLyDplIDmr4Hnu4Tku7ZcbiAgICBkZXN0cm95KCk6IHZvaWQge1xuICAgICAgICB0aGlzLmNsZWFyKCk7XG4gICAgfVxufSJdfQ==