// Claude Code Update
/**
 * 后端配置管理模块
 * 提供后端服务连接配置和验证功能
 */
// === 后端配置常量 ===
export const BACKEND_CONFIG = {
    SERVER_URL: 'http://localhost:8000',
    API_KEY: 'wdwxedit-api-key-2024',
    TIMEOUT: 30000,
    MAX_RETRIES: 3,
    USE_BACKEND_PROXY: true,
    HEALTH_CHECK_INTERVAL: 60000,
    DEBUG: false
};
/**
 * 构建完整的API端点URL
 * @param path API路径，如 '/api/v1/health'
 * @returns 完整的API URL
 */
export function getApiEndpoint(path) {
    return `${BACKEND_CONFIG.SERVER_URL}${path}`;
}
/**
 * 获取当前后端配置信息
 * @returns 配置信息对象
 */
export function getBackendConfigInfo() {
    return {
        serverUrl: BACKEND_CONFIG.SERVER_URL,
        hasApiKey: !!BACKEND_CONFIG.API_KEY,
        apiKeyLength: BACKEND_CONFIG.API_KEY.length,
        useBackendProxy: BACKEND_CONFIG.USE_BACKEND_PROXY,
        timeout: BACKEND_CONFIG.TIMEOUT,
        maxRetries: BACKEND_CONFIG.MAX_RETRIES
    };
}
/**
 * 验证后端配置的完整性和有效性
 * @returns 验证结果
 */
export function validateBackendConfig() {
    // 检查服务器地址
    if (!BACKEND_CONFIG.SERVER_URL) {
        return { valid: false, error: '服务器地址未配置' };
    }
    // 检查API密钥
    if (!BACKEND_CONFIG.API_KEY) {
        return { valid: false, error: 'API密钥未配置' };
    }
    // 检查API密钥长度
    if (BACKEND_CONFIG.API_KEY.length < 8) {
        return { valid: false, error: 'API密钥长度过短，建议至少8位' };
    }
    // 检查URL格式
    try {
        new URL(BACKEND_CONFIG.SERVER_URL);
    }
    catch (_a) {
        return { valid: false, error: '服务器地址格式无效' };
    }
    return { valid: true };
}
// === 启动时配置验证 ===
const validationResult = validateBackendConfig();
if (validationResult.valid) {
    console.log('✅ 后端配置验证通过:', getBackendConfigInfo());
}
else {
    console.error('❌ 后端配置验证失败:', validationResult.error);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFja2VuZC1jb25maWcuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJiYWNrZW5kLWNvbmZpZy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxxQkFBcUI7QUFDckI7OztHQUdHO0FBaUJILGlCQUFpQjtBQUNqQixNQUFNLENBQUMsTUFBTSxjQUFjLEdBQUc7SUFDNUIsVUFBVSxFQUFFLHVCQUF1QjtJQUNuQyxPQUFPLEVBQUUsdUJBQXVCO0lBQ2hDLE9BQU8sRUFBRSxLQUFLO0lBQ2QsV0FBVyxFQUFFLENBQUM7SUFDZCxpQkFBaUIsRUFBRSxJQUFJO0lBQ3ZCLHFCQUFxQixFQUFFLEtBQUs7SUFDNUIsS0FBSyxFQUFFLEtBQUs7Q0FDSixDQUFDO0FBRVg7Ozs7R0FJRztBQUNILE1BQU0sVUFBVSxjQUFjLENBQUMsSUFBWTtJQUN6QyxPQUFPLEdBQUcsY0FBYyxDQUFDLFVBQVUsR0FBRyxJQUFJLEVBQUUsQ0FBQztBQUMvQyxDQUFDO0FBRUQ7OztHQUdHO0FBQ0gsTUFBTSxVQUFVLG9CQUFvQjtJQUNsQyxPQUFPO1FBQ0wsU0FBUyxFQUFFLGNBQWMsQ0FBQyxVQUFVO1FBQ3BDLFNBQVMsRUFBRSxDQUFDLENBQUMsY0FBYyxDQUFDLE9BQU87UUFDbkMsWUFBWSxFQUFFLGNBQWMsQ0FBQyxPQUFPLENBQUMsTUFBTTtRQUMzQyxlQUFlLEVBQUUsY0FBYyxDQUFDLGlCQUFpQjtRQUNqRCxPQUFPLEVBQUUsY0FBYyxDQUFDLE9BQU87UUFDL0IsVUFBVSxFQUFFLGNBQWMsQ0FBQyxXQUFXO0tBQ3ZDLENBQUM7QUFDSixDQUFDO0FBRUQ7OztHQUdHO0FBQ0gsTUFBTSxVQUFVLHFCQUFxQjtJQUNuQyxVQUFVO0lBQ1YsSUFBSSxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUU7UUFDOUIsT0FBTyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxDQUFDO0tBQzVDO0lBRUQsVUFBVTtJQUNWLElBQUksQ0FBQyxjQUFjLENBQUMsT0FBTyxFQUFFO1FBQzNCLE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxVQUFVLEVBQUUsQ0FBQztLQUM1QztJQUVELFlBQVk7SUFDWixJQUFJLGNBQWMsQ0FBQyxPQUFPLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUNyQyxPQUFPLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQztLQUNwRDtJQUVELFVBQVU7SUFDVixJQUFJO1FBQ0YsSUFBSSxHQUFHLENBQUMsY0FBYyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0tBQ3BDO0lBQUMsV0FBTTtRQUNOLE9BQU8sRUFBRSxLQUFLLEVBQUUsS0FBSyxFQUFFLEtBQUssRUFBRSxXQUFXLEVBQUUsQ0FBQztLQUM3QztJQUVELE9BQU8sRUFBRSxLQUFLLEVBQUUsSUFBSSxFQUFFLENBQUM7QUFDekIsQ0FBQztBQUVELGtCQUFrQjtBQUNsQixNQUFNLGdCQUFnQixHQUFHLHFCQUFxQixFQUFFLENBQUM7QUFDakQsSUFBSSxnQkFBZ0IsQ0FBQyxLQUFLLEVBQUU7SUFDMUIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxhQUFhLEVBQUUsb0JBQW9CLEVBQUUsQ0FBQyxDQUFDO0NBQ3BEO0tBQU07SUFDTCxPQUFPLENBQUMsS0FBSyxDQUFDLGFBQWEsRUFBRSxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztDQUN0RCIsInNvdXJjZXNDb250ZW50IjpbIi8vIENsYXVkZSBDb2RlIFVwZGF0ZVxuLyoqXG4gKiDlkI7nq6/phY3nva7nrqHnkIbmqKHlnZdcbiAqIOaPkOS+m+WQjuerr+acjeWKoei/nuaOpemFjee9ruWSjOmqjOivgeWKn+iDvVxuICovXG5cbi8vID09PSDnsbvlnovlrprkuYkgPT09XG5leHBvcnQgaW50ZXJmYWNlIEJhY2tlbmRDb25maWdJbmZvIHtcbiAgc2VydmVyVXJsOiBzdHJpbmc7XG4gIGhhc0FwaUtleTogYm9vbGVhbjtcbiAgYXBpS2V5TGVuZ3RoOiBudW1iZXI7XG4gIHVzZUJhY2tlbmRQcm94eTogYm9vbGVhbjtcbiAgdGltZW91dDogbnVtYmVyO1xuICBtYXhSZXRyaWVzOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29uZmlnVmFsaWRhdGlvblJlc3VsdCB7XG4gIHZhbGlkOiBib29sZWFuO1xuICBlcnJvcj86IHN0cmluZztcbn1cblxuLy8gPT09IOWQjuerr+mFjee9ruW4uOmHjyA9PT1cbmV4cG9ydCBjb25zdCBCQUNLRU5EX0NPTkZJRyA9IHtcbiAgU0VSVkVSX1VSTDogJ2h0dHA6Ly9sb2NhbGhvc3Q6ODAwMCcsXG4gIEFQSV9LRVk6ICd3ZHd4ZWRpdC1hcGkta2V5LTIwMjQnLFxuICBUSU1FT1VUOiAzMDAwMCxcbiAgTUFYX1JFVFJJRVM6IDMsXG4gIFVTRV9CQUNLRU5EX1BST1hZOiB0cnVlLFxuICBIRUFMVEhfQ0hFQ0tfSU5URVJWQUw6IDYwMDAwLFxuICBERUJVRzogZmFsc2Vcbn0gYXMgY29uc3Q7XG5cbi8qKlxuICog5p6E5bu65a6M5pW055qEQVBJ56uv54K5VVJMXG4gKiBAcGFyYW0gcGF0aCBBUEnot6/lvoTvvIzlpoIgJy9hcGkvdjEvaGVhbHRoJ1xuICogQHJldHVybnMg5a6M5pW055qEQVBJIFVSTFxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0QXBpRW5kcG9pbnQocGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke0JBQ0tFTkRfQ09ORklHLlNFUlZFUl9VUkx9JHtwYXRofWA7XG59XG5cbi8qKlxuICog6I635Y+W5b2T5YmN5ZCO56uv6YWN572u5L+h5oGvXG4gKiBAcmV0dXJucyDphY3nva7kv6Hmga/lr7nosaFcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJhY2tlbmRDb25maWdJbmZvKCk6IEJhY2tlbmRDb25maWdJbmZvIHtcbiAgcmV0dXJuIHtcbiAgICBzZXJ2ZXJVcmw6IEJBQ0tFTkRfQ09ORklHLlNFUlZFUl9VUkwsXG4gICAgaGFzQXBpS2V5OiAhIUJBQ0tFTkRfQ09ORklHLkFQSV9LRVksXG4gICAgYXBpS2V5TGVuZ3RoOiBCQUNLRU5EX0NPTkZJRy5BUElfS0VZLmxlbmd0aCxcbiAgICB1c2VCYWNrZW5kUHJveHk6IEJBQ0tFTkRfQ09ORklHLlVTRV9CQUNLRU5EX1BST1hZLFxuICAgIHRpbWVvdXQ6IEJBQ0tFTkRfQ09ORklHLlRJTUVPVVQsXG4gICAgbWF4UmV0cmllczogQkFDS0VORF9DT05GSUcuTUFYX1JFVFJJRVNcbiAgfTtcbn1cblxuLyoqXG4gKiDpqozor4HlkI7nq6/phY3nva7nmoTlrozmlbTmgKflkozmnInmlYjmgKdcbiAqIEByZXR1cm5zIOmqjOivgee7k+aenFxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVCYWNrZW5kQ29uZmlnKCk6IENvbmZpZ1ZhbGlkYXRpb25SZXN1bHQge1xuICAvLyDmo4Dmn6XmnI3liqHlmajlnLDlnYBcbiAgaWYgKCFCQUNLRU5EX0NPTkZJRy5TRVJWRVJfVVJMKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogJ+acjeWKoeWZqOWcsOWdgOacqumFjee9ricgfTtcbiAgfVxuICBcbiAgLy8g5qOA5p+lQVBJ5a+G6ZKlXG4gIGlmICghQkFDS0VORF9DT05GSUcuQVBJX0tFWSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICdBUEnlr4bpkqXmnKrphY3nva4nIH07XG4gIH1cbiAgXG4gIC8vIOajgOafpUFQSeWvhumSpemVv+W6plxuICBpZiAoQkFDS0VORF9DT05GSUcuQVBJX0tFWS5sZW5ndGggPCA4KSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcjogJ0FQSeWvhumSpemVv+W6pui/h+efre+8jOW7uuiuruiHs+WwkTjkvY0nIH07XG4gIH1cbiAgXG4gIC8vIOajgOafpVVSTOagvOW8j1xuICB0cnkge1xuICAgIG5ldyBVUkwoQkFDS0VORF9DT05GSUcuU0VSVkVSX1VSTCk7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3I6ICfmnI3liqHlmajlnLDlnYDmoLzlvI/ml6DmlYgnIH07XG4gIH1cbiAgXG4gIHJldHVybiB7IHZhbGlkOiB0cnVlIH07XG59XG5cbi8vID09PSDlkK/liqjml7bphY3nva7pqozor4EgPT09XG5jb25zdCB2YWxpZGF0aW9uUmVzdWx0ID0gdmFsaWRhdGVCYWNrZW5kQ29uZmlnKCk7XG5pZiAodmFsaWRhdGlvblJlc3VsdC52YWxpZCkge1xuICBjb25zb2xlLmxvZygn4pyFIOWQjuerr+mFjee9rumqjOivgemAmui/hzonLCBnZXRCYWNrZW5kQ29uZmlnSW5mbygpKTtcbn0gZWxzZSB7XG4gIGNvbnNvbGUuZXJyb3IoJ+KdjCDlkI7nq6/phY3nva7pqozor4HlpLHotKU6JywgdmFsaWRhdGlvblJlc3VsdC5lcnJvcik7XG59XG4iXX0=